{"version":3,"sources":["webpack:///./src/classes/EffectsRepository.js?2ba1","webpack:///./src/classes/effects/point/GrayScale.js?2f3b","webpack:///./src/classes/effects/BasePoint.js?325c","webpack:///./src/classes/effects/point/Sepia.js?510e","webpack:///./src/classes/effects/point/Contrast.js?e873","webpack:///./src/classes/effects/point/Brightness.js?e56c"],"names":["availableEffects","add","name","_class","EffectsRepository","GrayScaleEffect","pixel","x","y","parameters","width","height","newRGB","r","g","b","a","BasePointEffect","imageData","getDefaultParameters","firstPixelIndex","result","imageDataCopy","Uint8ClampedArray","data","getIndex","normalizePixelValue","value","Math","min","max","sandbox","getPixel","index","getOriginalPixel","setPixel","rgba","before","call","callback","set","sepiaValue","tmp","ContrastEffect","contrast","factor","BrightnessEffect","brightness"],"mappings":"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","file":"0.efad0c8832db8385e8c8.hot-update.js","sourcesContent":["import GrayScale from './effects/point/GrayScale';\nimport Sepia from './effects/point/Sepia';\nimport Contrast from './effects/point/Contrast';\nimport Brightness from './effects/point/Brightness';\n\nlet availableEffects = {};\n\nfunction add(name, _class) {\n    availableEffects[name] = _class;\n}\n\nadd('gray-scale', GrayScale);\nadd('sepia', Sepia);\nadd('contrast', Contrast);\nadd('brightness', Brightness);\n\nclass EffectsRepository {\n    static get(name) {\n        return availableEffects[name];\n    }\n}\n\nexport default EffectsRepository;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/EffectsRepository.js","import BaseColorEffect from '../BasePoint';\n\nclass GrayScaleEffect extends BaseColorEffect {\n    static getName() {\n        return 'gray-scale';\n    }\n\n    callback(pixel, x, y, parameters, width, height) {\n        let newRGB = 0.299 * pixel.r + 0.587 * pixel.g + 0.114 * pixel.b;\n        return {\n            r: newRGB,\n            g: newRGB,\n            b: newRGB,\n            a: pixel.a\n        };\n    }\n}\n\nexport default GrayScaleEffect;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/effects/point/GrayScale.js","import BaseEffect from './Base';\nimport extend from 'extend';\n\nclass BasePointEffect extends BaseEffect {\n    callback(pixel, x, y, parameters, width, height) {\n        throw \"Extend it.\"\n    }\n\n    run(imageData, parameters) {\n\n        parameters = extend(true, {}, this.getDefaultParameters(), parameters);\n\n        let x, y,\n            firstPixelIndex,\n            result,\n            imageDataCopy = new Uint8ClampedArray(imageData.data), // copy image data\n            /**\n             * Get ImageData array index from x and y position\n             * @param x\n             * @param y\n             * @returns {number}\n             */\n            getIndex = function getIndex(x, y) {\n                return y * imageData.width * 4 + x * 4;\n            },\n            normalizePixelValue = function (value) {\n                return Math.min(Math.max(value, 0), 255) | 0;\n            },\n            sandbox = { // object invoked as this in effect callback\n                /**\n                 * Get changed pixel\n                 * @param {int} x\n                 * @param {int} y\n                 * @returns {{r: *, g: *, b: *, a: *}}\n                 */\n                getPixel: function (x, y) {\n                    let index = getIndex(x, y);\n                    return {\n                        r: imageDataCopy[index + 0],\n                        g: imageDataCopy[index + 1],\n                        b: imageDataCopy[index + 2],\n                        a: imageDataCopy[index + 3]\n                    };\n                },\n                /**\n                 * Get original pixel.\n                 * @param {int} x\n                 * @param {int} y\n                 * @returns {{r: *, g: *, b: *, a: *}}\n                 */\n                getOriginalPixel: function (x, y) {\n                    let index = getIndex(x, y);\n                    return {\n                        r: imageData.data[index + 0],\n                        g: imageData.data[index + 1],\n                        b: imageData.data[index + 2],\n                        a: imageData.data[index + 3]\n                    };\n                },\n                /**\n                 * Set new pixel\n                 * @param {int} x\n                 * @param {int} y\n                 * @param {object} rgba\n                 */\n                setPixel: function (x, y, rgba) {\n                    let index = getIndex(x, y);\n                    imageDataCopy[index + 0] = normalizePixelValue(rgba.r);\n                    imageDataCopy[index + 1] = normalizePixelValue(rgba.g);\n                    imageDataCopy[index + 2] = normalizePixelValue(rgba.b);\n                    imageDataCopy[index + 3] = normalizePixelValue(rgba.a);\n                },\n                /**\n                 * Data created by effect init function\n                 */\n                data: null,\n                /**\n                 * ImageData width\n                 */\n                width: imageData.width,\n                /**\n                 * ImageData height\n                 */\n                height: imageData.height\n            };\n\n        sandbox.data = this.before.call(sandbox, parameters, imageData.width, imageData.height, imageData);\n\n        for (y = 0; y < imageData.height; y += 1) {\n            for (x = 0; x < imageData.width; x += 1) {\n                firstPixelIndex = getIndex(x, y);\n\n                result = this.callback.call(sandbox,\n                    {\n                        r: imageDataCopy[firstPixelIndex + 0],\n                        g: imageDataCopy[firstPixelIndex + 1],\n                        b: imageDataCopy[firstPixelIndex + 2],\n                        a: imageDataCopy[firstPixelIndex + 3]\n                    },\n                    x,\n                    y,\n                    parameters,\n                    imageData.width,\n                    imageData.height\n                );\n\n                if (typeof result === \"object\") {\n                    imageDataCopy[firstPixelIndex + 0] = normalizePixelValue(result.r);\n                    imageDataCopy[firstPixelIndex + 1] = normalizePixelValue(result.g);\n                    imageDataCopy[firstPixelIndex + 2] = normalizePixelValue(result.b);\n                    imageDataCopy[firstPixelIndex + 3] = normalizePixelValue(result.a);\n                }\n            }\n        }\n\n        imageData.data.set(imageDataCopy);\n        return imageData;\n    }\n}\n\nexport default BasePointEffect;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/effects/BasePoint.js","import BaseColorEffect from '../BasePoint';\n\nclass GrayScaleEffect extends BaseColorEffect {\n    static getName() {\n        return 'sepia';\n    }\n\n    getDefaultParameters() {\n        return {\n            sepiaValue: 1\n        };\n    }\n\n    callback(pixel, x, y, parameters, width, height) {\n        let tmp = 0.299 * pixel.r + 0.587 * pixel.g + 0.114 * pixel.b;\n\n        pixel.r = tmp + 2 * parameters.sepiaValue;\n        pixel.g = tmp + parameters.sepiaValue;\n        pixel.b = tmp;\n\n        return pixel;\n    }\n}\n\nexport default GrayScaleEffect;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/effects/point/Sepia.js","import BaseColorEffect from '../BasePoint';\n\nclass ContrastEffect extends BaseColorEffect {\n    static getName() {\n        return 'contrast';\n    }\n\n    getDefaultParameters() {\n        return {\n            contrast: 0.5\n        };\n    }\n\n    before(parameters) {\n        return {\n            factor: (259 * ((parameters.contrast * 255) + 255)) / (255 * (259 - (parameters.contrast * 255)))\n        };\n    }\n\n    callback(pixel, x, y, parameters, width, height) {\n        pixel.r = this.data.factor * (pixel.r - 128) + 128;\n        pixel.g = this.data.factor * (pixel.g - 128) + 128;\n        pixel.b = this.data.factor * (pixel.b - 128) + 128;\n\n        return pixel;\n    }\n}\n\nexport default ContrastEffect;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/effects/point/Contrast.js","import BasePointEffect from '../BasePoint';\n\nclass BrightnessEffect extends BasePointEffect {\n    static getName() {\n        return 'brightness';\n    }\n\n    getDefaultParameters() {\n        return {\n            brightness: 0.5\n        };\n    }\n\n    before(parameters) {\n        return {\n            brightness: 255 * parameters.brightness\n        };\n    }\n\n    callback(pixel, x, y, parameters, width, height) {\n        pixel.r = pixel.r + this.data.brightness;\n        pixel.g = pixel.g + this.data.brightness;\n        pixel.b = pixel.b + this.data.brightness;\n\n        return pixel;\n    }\n}\n\nexport default BrightnessEffect;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/effects/point/Brightness.js"],"sourceRoot":""}